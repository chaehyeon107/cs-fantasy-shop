âœ… JCloud ë°°í¬ ì „ì²´ ê³¼ì • (íŒ€ì› ì „ë‹¬ìš© ìµœì¢… ì •ë¦¬ë³¸)

âœ… ì´ ë§¤ë‰´ì–¼ì€ Express + Prisma + MySQL + Redis + JCloud í¬íŠ¸í¬ì›Œë”© í™˜ê²½ ê¸°ì¤€ì´ë‹¤.

âœ… 1ï¸âƒ£ JCloud ì¸ìŠ¤í„´ìŠ¤ ì ‘ì† (Xshell)

xshell > í˜¸ìŠ¤íŠ¸: 113.198.66.68 , í¬íŠ¸ë²ˆí˜¸ 19180 > ì‚¬ìš©ì ì´ë¦„> ì´ë¦„: ubuntu> ë°©ë²• ë„˜ì–´ê°€ì„œ password ì²´í¬ í•´ì œ í›„ public key ì²´í¬> ì„¤ì •> ì‚¬ìš©ì í‚¤ ì˜†ì— ... í´ë¦­ í›„ ê°€ì ¸ì˜¤ê¸°>lcw1.pem >í™•ì¸>ì—°ê²°

âœ… 2ï¸âƒ£ ê¸°ë³¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜
sudo apt update
sudo apt install -y git curl

âœ… 3ï¸âƒ£ Node.js ì„¤ì¹˜ (18ë²„ì „)
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs


í™•ì¸:

node -v
npm -v

âœ… 4ï¸âƒ£ GitHub í”„ë¡œì íŠ¸ ê°€ì ¸ì˜¤ê¸°
git clone https://github.com/chaehyeon107/cs-fantasy-shop
cd cs-fantasy-shop/backend

âœ… 5ï¸âƒ£ íŒ¨í‚¤ì§€ ì„¤ì¹˜ (â— ë°˜ë“œì‹œ backend í´ë”ì—ì„œ)
npm install

âœ… âœ… âœ… ì—¬ê¸°ì„œë¶€í„°ê°€ í•µì‹¬ í™˜ê²½ì„¤ì • âœ… âœ… âœ…
âœ… 6ï¸âƒ£ JCloud í¬íŠ¸í¬ì›Œë”© ê°œë…

JCloudëŠ” ë‹¤ìŒì²˜ëŸ¼ ê³ ì •ë¨:

ë‚´ë¶€ í¬íŠ¸	ì™¸ë¶€ ì ‘ì† í¬íŠ¸
3000	13XXX
7777 (SSH)	19XXX

ğŸ‘‰ ê·¸ë˜ì„œ Express ì„œë²„ëŠ” ë°˜ë“œì‹œ 3000ì—ì„œ ë– ì•¼ í•¨

âœ… 7ï¸âƒ£ server.js í¬íŠ¸ ìˆ˜ì • (í•„ìˆ˜)

nano src/server.js


ì•„ë˜ì²˜ëŸ¼ ìˆ˜ì •:

const PORT = 3000;

app.listen(PORT, "0.0.0.0", () => {
  console.log(`âœ… Server listening on 0.0.0.0:${PORT}`);
});


ì €ì¥:
Ctrl + O â†’ Enter â†’ Ctrl + X

âœ… 8ï¸âƒ£ í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„± (.env.dev)
nano .env.dev


ì•„ë˜ ê·¸ëŒ€ë¡œ ì…ë ¥:

PORT=3000

DATABASE_URL="mysql://root:1234@localhost:3306/cs_fantasy_shop"

REDIS_URL=redis://localhost:6379

JWT_SECRET=super_secret_key
JWT_ACCESS_SECRET=access_secret
JWT_REFRESH_SECRET=refresh_secret

ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=admin1234


ì €ì¥:
Ctrl + O â†’ Enter â†’ Ctrl + X

âœ… 9ï¸âƒ£ Prismaìš© .env íŒŒì¼ ë³µì‚¬ (ì¤‘ìš”)
cp .env.dev .env

âœ… âœ… âœ… MySQL ì„¤ì¹˜ & ì„¤ì • âœ… âœ… âœ…
âœ… ğŸ”Ÿ MySQL ì„¤ì¹˜
sudo apt install mysql-server -y
sudo systemctl start mysql
sudo systemctl enable mysql


í™•ì¸:

sudo systemctl status mysql


â†’ active (running) ë‚˜ì˜¤ë©´ ì„±ê³µ âœ…

âœ… 1ï¸âƒ£1ï¸âƒ£ MySQL root ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (1234)
sudo mysql

ALTER USER 'root'@'localhost'
IDENTIFIED WITH mysql_native_password
BY '1234';

FLUSH PRIVILEGES;
EXIT;

âœ… 1ï¸âƒ£2ï¸âƒ£ DB ìƒì„±
mysql -u root -p


ë¹„ë°€ë²ˆí˜¸: 1234

CREATE DATABASE cs_fantasy_shop;
SHOW DATABASES;
EXIT;

âœ… âœ… âœ… Prisma ë§ˆì´ê·¸ë ˆì´ì…˜ âœ… âœ… âœ…
âœ… 1ï¸âƒ£3ï¸âƒ£ Prisma Client ìƒì„± + í…Œì´ë¸” ìƒì„±
npx prisma generate
npx prisma migrate dev --name init


âœ… ì„±ê³µí•˜ë©´:

Applying migration `init`
Generated Prisma Client

âœ… âœ… âœ… Redis ì„¤ì¹˜ âœ… âœ… âœ…
âœ… 1ï¸âƒ£4ï¸âƒ£ Redis ì„¤ì¹˜
sudo apt install redis-server -y
sudo systemctl start redis
sudo systemctl enable redis


í™•ì¸:

redis-cli ping


ì‘ë‹µ:

PONG

âœ… âœ… âœ… ì„œë²„ ì‹¤í–‰ âœ… âœ… âœ…
âœ… 1ï¸âƒ£5ï¸âƒ£ ì„œë²„ ì‹¤í–‰
npm run dev


âœ… ë°˜ë“œì‹œ ì´ë ‡ê²Œ ë– ì•¼ ì •ìƒ:

âœ… Server listening on 0.0.0.0:3000
âœ… Connected to Redis

âœ… âœ… âœ… ì™¸ë¶€ ì ‘ì† í…ŒìŠ¤íŠ¸ (Postman) âœ… âœ… âœ…

JCloud í¬íŠ¸í¬ì›Œë”©ì´ ì˜ˆë¥¼ ë“¤ì–´:

3000 â†’ 13456


ì´ë©´ ì™¸ë¶€ ì ‘ì† ì£¼ì†ŒëŠ”:

http://113.xxx.xxx.xxx:13456/health


ì‘ë‹µ ì˜ˆ:

{
  "status": "ok",
  "version": "1.0.0"
}

âœ… âœ… âœ… íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸ âœ… âœ… âœ…
POST http://113.xxx.xxx.xxx:13456/api/auth/register


Body:

{
  "email": "test@test.com",
  "password": "1234",
  "nickname": "tester"
}


âœ… ì„±ê³µí•˜ë©´:

íšŒì›ê°€ì… ì™„ë£Œ

âœ… âœ… âœ… ìì£¼ í„°ì§€ëŠ” ì˜¤ë¥˜ ìš”ì•½ âœ… âœ… âœ…
ì—ëŸ¬	ì›ì¸	í•´ê²°
ECONNREFUSED 3000	app.listen 0.0.0.0 ì•ˆ ì”€	server.js ìˆ˜ì •
P1012	Prismaê°€ .env ëª» ì½ìŒ	.env.dev â†’ .env ë³µì‚¬
P1000	MySQL ë¹„ë°€ë²ˆí˜¸ í‹€ë¦¼	root 1234 ì¬ì„¤ì •
DB does not exist	DB ìƒì„± ì•ˆ í•¨	CREATE DATABASE
âœ… âœ… âœ… ìµœì¢… í•µì‹¬ ìš”ì•½ âœ… âœ… âœ…

âœ… Express í¬íŠ¸ = 3000
âœ… ë°˜ë“œì‹œ app.listen(PORT, "0.0.0.0")
âœ… .env.dev + .env ë‘˜ ë‹¤ í•„ìš”
âœ… MySQL root ë¹„ë²ˆ = 1234
âœ… Redis ë°˜ë“œì‹œ ì‹¤í–‰
âœ… Prisma migrate í•„ìˆ˜
âœ… ì™¸ë¶€ ì ‘ì†ì€ 13XXX í¬íŠ¸
